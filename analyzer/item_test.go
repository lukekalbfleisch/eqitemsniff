package analyzer

import (
	"encoding/hex"
	"fmt"
	"testing"

	"github.com/stretchr/testify/assert"
)

func TestItem(t *testing.T) {
	assert := assert.New(t)

	packet := &EQPacket{}
	packets := []string{
		"cee34467000000574e654d303034303030307a775730300001000000001c000a00ffff00000000000000000100000000000000af6400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ffffffff000000000000000000ffffffff00000000004c6f6e672053776f7264004c6f6e672053776f72640049543100008a1300004b0000000101000200600000e02e00004e020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000009d010000ffff0000000000000000000000000000ffffffff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001d00000006000000000000ff000000000000000000000000000000000000000000000000000000803f0000000000000000000000000000000000ffffffff000000000400000001001400000001000000000001000000000001000000000001000000000001000000000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000c00000000000000ffffffff0000000000000100000000000000000000000000000000000000000000000000ffffffff000000000000000000000000000000",         //item.0.pkt
		"86000003d4e34467000000574e654d303034303030302b775730300001000000001c000b00ffff00000000000000000100000000000000b06400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ffffffff000000000000000000ffffffff0000000000526f756e6420536869656c6400526f756e6420536869656c6400495432303300002a230000320000000101000200400000dc0500001e02000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000bf4300007ff30000000000000000000000000000ffffffff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ff000000000800000000000000000000000000000000000000000000803f0000000000000000000000000000000000ffffffff00000000070000000100140000000100000000000100000000000100000000000100000000000100000000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000200000000000000ffffffff0000000000000100000000000000000000000000000000000000000000000000ffffffff000000000000000000", //item.1.pkt
	}
	var err error
	for _, p := range packets {
		packet.Data, err = hex.DecodeString(p)
		if !assert.NoError(err) {
			t.Fatal(err)
		}
		zone := ZoneScan(packet)
		fmt.Println(zone)
		t.Log(zone)
	}
	t.Fatal("done")
}
